{"ast":null,"code":"import _classCallCheck from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Button from\"./Button.jsx\";import TATile from\"./TATile.jsx\";import Ticket from\"./Ticket.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var socket;var StudentView=/*#__PURE__*/function(_React$Component){_inherits(StudentView,_React$Component);var _super=_createSuper(StudentView);function StudentView(props){var _this;_classCallCheck(this,StudentView);_this=_super.call(this,props);_this.questionOnChanged=function(event){_this.setState({question:event.target.value});};_this.priorityOnChanged=function(event){//this is convuluted but i refuse to make a second static object\nvar grabPriority=Object.keys(_this.state.priorityLevels).filter(function(level){return _this.state.priorityLevels[level]===event.target.value;});_this.setState({currentPriority:grabPriority[0]});};_this.submitQuestion=function(){var ticketData={Name:_this.props.name,Issue:_this.state.question,Label:_this.state.currentPriority,Action:\"Add\"};socket.send(ticketData);};_this.state={ticket:[],activeTAs:[],student:true,question:\"\",questionMaxLength:100,questionMinLength:20,priorityLevels:{0:\"Homework\",1:\"Exam\",2:\"Lab\",3:\"Lecture\"},currentPriority:0};return _this;}_createClass(StudentView,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;socket=new WebSocket('ws://localhost:8000/websocket');socket.addEventListener('open',function(event){console.log(\"Websocket Connected!\");});socket.addEventListener('message',function(event){var data=JSON.parse(event.data);_this2.setState({ticket:data[\"Queue\"]});});socket.addEventListener('close',function(event){console.log(\"Websocket Disconnected!\");});fetch(\"/getStudents\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(\"\")}).then(function(response){if(response.ok===false){alert(\"Error: Couldn't connect to server\");return\"\";}else{return response.json();}}).then(function(data){if(data===\"\"){return;}var taList=[];data.map(function(student){if(student.accType===true){taList.push(student);}});_this2.setState({activeTAs:taList});});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsxs(\"div\",{className:\"studentViewContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"studentQueueContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"student headerText\",children:\"Student Queue\"}),/*#__PURE__*/_jsx(\"div\",{className:\"studentQueueWindow\",children:this.state.ticket.map(function(ticket){return/*#__PURE__*/_jsx(Ticket,{name:ticket.name,question:ticket.question,admin:false,priority:ticket.priority,priorityLevels:_this3.state.priorityLevels});})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"rightMasterStudent\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"welcomeStudent\",children:\"Welcome, \"+this.props.name}),/*#__PURE__*/_jsx(\"div\",{className:\"activeTA headerText\",children:\"Active TA's\"}),/*#__PURE__*/_jsx(\"div\",{className:\"activeTAWindow\",children:this.state.activeTAs.map(function(ta){return/*#__PURE__*/_jsx(TATile,{name:ta.name,special:ta.specialties});})}),/*#__PURE__*/_jsxs(\"div\",{className:\"newQuestionContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"newQuestionHeader\",children:\"New Question\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"charCount\",children:[\"Min: \",this.state.question.length,\"/\",this.state.questionMinLength,\" \",\"Max: \",this.state.question.length,\"/\",this.state.questionMaxLength]}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"newQuestionInput\",placeholder:\"Write question here...\",maxLength:this.state.questionMaxLength,minLength:this.state.questionMinLength,onChange:this.questionOnChanged}),/*#__PURE__*/_jsxs(\"div\",{className:\"studentButtonContainer\",children:[/*#__PURE__*/_jsx(Button,{active:true,text:\"Post\",buttonType:\"postButton\",onclick:this.submitQuestion}),/*#__PURE__*/_jsx(\"select\",{className:\"priorityDropdown\",onChange:this.priorityOnChanged,children:Object.values(this.state.priorityLevels).map(function(key){return/*#__PURE__*/_jsx(\"option\",{className:\"priorityOption\",value:key,children:key});})})]})]})]})]});}}]);return StudentView;}(React.Component);export default StudentView;","map":{"version":3,"sources":["C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/src/Components/StudentView.jsx"],"names":["React","Button","TATile","Ticket","socket","StudentView","props","questionOnChanged","event","setState","question","target","value","priorityOnChanged","grabPriority","Object","keys","state","priorityLevels","filter","level","currentPriority","submitQuestion","ticketData","Name","name","Issue","Label","Action","send","ticket","activeTAs","student","questionMaxLength","questionMinLength","WebSocket","addEventListener","console","log","data","JSON","parse","fetch","method","headers","body","stringify","then","response","ok","alert","json","taList","map","accType","push","priority","ta","specialties","length","values","key","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Button from \"./Button.jsx\";\r\nimport TATile from \"./TATile.jsx\";\r\nimport Ticket from \"./Ticket.jsx\";\r\n\r\nvar socket;\r\n\r\nclass StudentView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      ticket: [],\r\n      activeTAs: [],\r\n      student: true,\r\n      question: \"\",\r\n      questionMaxLength: 100,\r\n      questionMinLength: 20,\r\n      priorityLevels: { 0: \"Homework\", 1: \"Exam\", 2: \"Lab\", 3: \"Lecture\" },\r\n      currentPriority: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    socket = new WebSocket('ws://localhost:8000/websocket');\r\n\r\n    socket.addEventListener('open', (event) => {\r\n      console.log(\"Websocket Connected!\");\r\n    });\r\n    \r\n    socket.addEventListener('message', (event) => {\r\n      var data = JSON.parse(event.data);\r\n      this.setState({ticket: data[\"Queue\"]})\r\n    });\r\n    \r\n    socket.addEventListener('close', (event) => {\r\n      console.log(\"Websocket Disconnected!\")\r\n    });\r\n\r\n    fetch(\"/getStudents\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(\"\"),\r\n    })\r\n      .then((response) => {\r\n        if (response.ok === false) {\r\n          alert(\"Error: Couldn't connect to server\");\r\n          return \"\";\r\n        } else {\r\n          return response.json();\r\n        }\r\n      })\r\n      .then((data) => {\r\n        if (data === \"\") {\r\n          return;\r\n        }\r\n        var taList = [];\r\n        data.map((student) => {\r\n          if (student.accType === true) {\r\n            taList.push(student);\r\n          }\r\n        });\r\n\r\n        this.setState({ activeTAs: taList });\r\n      });\r\n  };\r\n\r\n  questionOnChanged = (event) => {\r\n    this.setState({ question: event.target.value });\r\n  };\r\n\r\n  priorityOnChanged = (event) => {\r\n    //this is convuluted but i refuse to make a second static object\r\n    var grabPriority = Object.keys(this.state.priorityLevels).filter(\r\n      (level) => {\r\n        return this.state.priorityLevels[level] === event.target.value;\r\n      }\r\n    );\r\n    this.setState({ currentPriority: grabPriority[0] });\r\n  };\r\n\r\n  submitQuestion = () => {\r\n    var ticketData = {\r\n      Name: this.props.name,\r\n      Issue: this.state.question,\r\n      Label: this.state.currentPriority,\r\n      Action: \"Add\",\r\n    };\r\n    socket.send(ticketData);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"studentViewContainer\">\r\n        <div className=\"studentQueueContainer\">\r\n          <div className=\"student headerText\">Student Queue</div>\r\n          <div className=\"studentQueueWindow\">\r\n            {this.state.ticket.map((ticket) => {\r\n              return (\r\n                <Ticket\r\n                  name={ticket.name}\r\n                  question={ticket.question}\r\n                  admin={false}\r\n                  priority={ticket.priority}\r\n                  priorityLevels={this.state.priorityLevels}\r\n                ></Ticket>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n        <div className=\"rightMasterStudent\">\r\n          <div className=\"welcomeStudent\">{\"Welcome, \" + this.props.name}</div>\r\n          <div className=\"activeTA headerText\">Active TA's</div>\r\n          <div className=\"activeTAWindow\">\r\n            {this.state.activeTAs.map((ta) => {\r\n              return <TATile name={ta.name} special={ta.specialties} />;\r\n            })}\r\n          </div>\r\n          <div className=\"newQuestionContainer\">\r\n            <div className=\"newQuestionHeader\">New Question</div>\r\n            <p className=\"charCount\">\r\n              Min: {this.state.question.length}/{this.state.questionMinLength}{\" \"}\r\n              Max: {this.state.question.length}/{this.state.questionMaxLength}\r\n            </p>\r\n            <textarea\r\n              type=\"text\"\r\n              className=\"newQuestionInput\"\r\n              placeholder=\"Write question here...\"\r\n              maxLength={this.state.questionMaxLength}\r\n              minLength={this.state.questionMinLength}\r\n              onChange={this.questionOnChanged}\r\n            ></textarea>\r\n            <div className=\"studentButtonContainer\">\r\n              <Button\r\n                active={true}\r\n                text=\"Post\"\r\n                buttonType=\"postButton\"\r\n                onclick={this.submitQuestion}\r\n              ></Button>\r\n              <select\r\n                className=\"priorityDropdown\"\r\n                onChange={this.priorityOnChanged}\r\n              >\r\n                {Object.values(this.state.priorityLevels).map((key) => {\r\n                  return (\r\n                    <option className=\"priorityOption\" value={key}>\r\n                      {key}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StudentView;\r\n"]},"metadata":{},"sourceType":"module"}