{"ast":null,"code":"import _classCallCheck from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Button from\"./Button.jsx\";import RouteButton from\"./RouteButton.jsx\";import bcrypt from\"bcryptjs\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginPage=/*#__PURE__*/function(_React$Component){_inherits(LoginPage,_React$Component);var _super=_createSuper(LoginPage);function LoginPage(props){var _this;_classCallCheck(this,LoginPage);_this=_super.call(this,props);_this.login=function(){var email=_this.state.email;var pass=_this.state.password;// bcrypt.genSalt(10, function (err, salt) {\n//   bcrypt.hash(pass, salt, function (err, hash) {\n//     var b64hash = btoa(hash);\n//   });\n// });\nfetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:email,password:pass,salt:\"\"})}).then(function(response){if(response!==null&&response!==\"\"){return response.json();}else{return\"\";}}).then(function(success){if(success!==\"\"){if(success.Role===\"TA\"){_this.props.loginFlag(true,true,success.Username);}else if(success.Role===\"Student\"){_this.props.loginFlag(true,false,success.Username);}else if(success.Role===\"Instructor\"){_this.props.loginFlag(true,true,success.Username);}}else{_this.props.loginFlag(false,false,\"\");}});return true;};_this.emailOnChange=function(event){_this.setState({email:event.target.value});};_this.passwordOnChange=function(event){_this.setState({password:event.target.value});};_this.state={email:\"\",password:\"\"};return _this;}//TODO: Functions to verify email and password are \"valid\"\n_createClass(LoginPage,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"loginPageContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logoText\",children:\"OH-Helper\"}),/*#__PURE__*/_jsx(\"div\",{className:\"loginWindowContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginWindow\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"loginHeader\",children:\"Login/Create Account\"}),/*#__PURE__*/_jsx(\"div\",{className:\"lineBreak\"}),/*#__PURE__*/_jsx(\"p\",{className:\"email inputHeader\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",id:\"email\",className:\"input\",placeholder:\"Email...\",onChange:this.emailOnChange}),/*#__PURE__*/_jsx(\"p\",{className:\"password inputHeader\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",className:\"input\",placeholder:\"Password...\",onChange:this.passwordOnChange}),/*#__PURE__*/_jsx(Button,{active:true,onclick:this.login,text:\"Login\",buttonType:\"loginButton\"}),/*#__PURE__*/_jsx(RouteButton,{active:true,route:\"/createAccount\",onclick:function onclick(){return true;},text:\"Create Account\",buttonType:\"createButton\"})]})})]});}}]);return LoginPage;}(React.Component);export default LoginPage;","map":{"version":3,"sources":["C:/Users/J_Dun/OneDrive/Documents/GitHub/OH-Helper/oh-helper-frontend/src/Components/LoginPage.jsx"],"names":["React","Button","RouteButton","bcrypt","LoginPage","props","login","email","state","pass","password","fetch","method","headers","body","JSON","stringify","salt","then","response","json","success","Role","loginFlag","Username","emailOnChange","event","setState","target","value","passwordOnChange","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Button from \"./Button.jsx\";\r\nimport RouteButton from \"./RouteButton.jsx\";\r\nimport bcrypt from \"bcryptjs\";\r\n\r\nclass LoginPage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n    };\r\n  }\r\n\r\n  //TODO: Functions to verify email and password are \"valid\"\r\n\r\n  login = () => {\r\n    var email = this.state.email;\r\n    var pass = this.state.password;\r\n\r\n    // bcrypt.genSalt(10, function (err, salt) {\r\n    //   bcrypt.hash(pass, salt, function (err, hash) {\r\n    //     var b64hash = btoa(hash);\r\n        \r\n    //   });\r\n    // });\r\n\r\n    fetch(\"/login\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ email: email, password: pass, salt:\"\"}),\r\n    })\r\n      .then((response) => {\r\n        if (response !== null && response !== \"\") {\r\n          return response.json();\r\n        } else {\r\n          return \"\";\r\n        }\r\n      })\r\n      .then((success) => {\r\n        if (success !== \"\") {\r\n          if (success.Role === \"TA\") {\r\n            this.props.loginFlag(true, true, success.Username);\r\n          } else if (success.Role === \"Student\") {\r\n            this.props.loginFlag(true, false, success.Username);\r\n          } else if (success.Role === \"Instructor\") {\r\n            this.props.loginFlag(true, true, success.Username);\r\n          }\r\n        } else {\r\n          this.props.loginFlag(false, false, \"\");\r\n        }\r\n      });\r\n    return true;\r\n  };\r\n\r\n  emailOnChange = (event) => {\r\n    this.setState({ email: event.target.value });\r\n  };\r\n\r\n  passwordOnChange = (event) => {\r\n    this.setState({ password: event.target.value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"loginPageContainer\">\r\n        <div className=\"logoText\">OH-Helper</div>\r\n        <div className=\"loginWindowContainer\">\r\n          <div className=\"loginWindow\">\r\n            <p className=\"loginHeader\">Login/Create Account</p>\r\n            <div className=\"lineBreak\"></div>\r\n            <p className=\"email inputHeader\">Email:</p>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              id=\"email\"\r\n              className=\"input\"\r\n              placeholder=\"Email...\"\r\n              onChange={this.emailOnChange}\r\n            />\r\n            <p className=\"password inputHeader\">Password:</p>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              id=\"password\"\r\n              className=\"input\"\r\n              placeholder=\"Password...\"\r\n              onChange={this.passwordOnChange}\r\n            />\r\n            <Button\r\n              active={true}\r\n              onclick={this.login}\r\n              text=\"Login\"\r\n              buttonType=\"loginButton\"\r\n            ></Button>\r\n            <RouteButton\r\n              active={true}\r\n              route=\"/createAccount\"\r\n              onclick={() => {\r\n                return true;\r\n              }}\r\n              text=\"Create Account\"\r\n              buttonType=\"createButton\"\r\n            ></RouteButton>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}